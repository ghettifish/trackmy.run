{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nvar _jsxFileName = \"/Users/nicbovee/Projects/PrismaDemo/frontend/pages/running.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Page from \"../templates/Page\";\nimport Link from \"next/link\";\nimport Timer from \"../components/Timer\";\nimport MileCounter from \"../components/MileCounter\";\nimport { useState, useEffect } from 'react';\n\nfunction success(pos) {\n  var crd = pos.coords;\n  console.log('Your current position is:');\n  console.log(\"Latitude : \".concat(crd.latitude));\n  console.log(\"Longitude: \".concat(crd.longitude));\n  console.log(\"More or less \".concat(crd.accuracy, \" meters.\"));\n}\n\nfunction error(err) {\n  console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n}\n\nvar getCurrentPosition = function getCurrentPosition(options) {\n  return new _Promise(function (resolve, reject) {\n    navigator.geolocation.getCurrentPosition(resolve, reject, options);\n  });\n};\n\nvar options = {\n  enableHighAccuracy: true,\n  timeout: 1000,\n  maximumAge: 0\n};\n\nvar getCoordinates =\n/*#__PURE__*/\nfunction () {\n  var _ref = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var coordinates, options;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            coordinates = null;\n            options = {\n              enableHighAccuracy: true,\n              timeout: 1000,\n              maximumAge: 0\n            };\n            return _context.abrupt(\"return\", coordinates);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getCoordinates() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar StartStop = function StartStop(props) {\n  var isRunning = props.isRunning,\n      toggle = props.toggle;\n  return isRunning ? __jsx(\"a\", {\n    onClick: function onClick() {\n      return toggle(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, \"Pause\") : __jsx(\"a\", {\n    onClick: function onClick() {\n      return toggle(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Start\");\n};\n\nvar Running = function Running() {\n  var _useState = useState([]),\n      coordinates = _useState[0],\n      setCoordinates = _useState[1];\n\n  var _useState2 = useState(true),\n      isRunning = _useState2[0],\n      setIsRunning = _useState2[1];\n\n  function updateCoordinates() {\n    return _updateCoordinates.apply(this, arguments);\n  }\n\n  function _updateCoordinates() {\n    _updateCoordinates = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var currentPosition, crd;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return getCoordinates();\n\n            case 2:\n              currentPosition = _context2.sent;\n\n              if (!isRunning) {\n                _context2.next = 15;\n                break;\n              }\n\n              _context2.prev = 4;\n              _context2.next = 7;\n              return getCurrentPosition(options);\n\n            case 7:\n              crd = _context2.sent;\n              console.log(crd.latitude);\n              setInterval(function () {\n                if (currentPosition !== null) {\n                  setCoordinates([].concat(_toConsumableArray(coordinates), [{\n                    lat: crd.latitude,\n                    lng: crd.longitude // utc: Date.now()\n\n                  }]));\n                } //console.log(coordinates);\n\n              }, 1000);\n              _context2.next = 15;\n              break;\n\n            case 12:\n              _context2.prev = 12;\n              _context2.t0 = _context2[\"catch\"](4);\n              console.warn(\"ERROR(\".concat(_context2.t0.code, \"): \").concat(_context2.t0.message));\n\n            case 15:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[4, 12]]);\n    }));\n    return _updateCoordinates.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    updateCoordinates();\n  }, []);\n  return __jsx(Page, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Run!\"), __jsx(MileCounter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), __jsx(Timer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), __jsx(StartStop, {\n    isRunning: isRunning,\n    toggle: setIsRunning,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), __jsx(Link, {\n    href: \"/finished\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Stop\")));\n};\n\nexport default Running;","map":{"version":3,"sources":["/Users/nicbovee/Projects/PrismaDemo/frontend/pages/running.tsx"],"names":["Page","Link","Timer","MileCounter","useState","useEffect","success","pos","crd","coords","console","log","latitude","longitude","accuracy","error","err","warn","code","message","getCurrentPosition","options","resolve","reject","navigator","geolocation","enableHighAccuracy","timeout","maximumAge","getCoordinates","coordinates","StartStop","props","isRunning","toggle","Running","setCoordinates","setIsRunning","updateCoordinates","currentPosition","setInterval","lat","lng"],"mappings":"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","sourcesContent":["import Page from \"../templates/Page\";\nimport Link from \"next/link\";\nimport Timer from \"../components/Timer\";\nimport MileCounter from \"../components/MileCounter\";\nimport { useState, useEffect, Dispatch, SetStateAction } from 'react';\n\n\n  \n  function success(pos: any) {\n    var crd = pos.coords;\n  \n    console.log('Your current position is:');\n    console.log(`Latitude : ${crd.latitude}`);\n    console.log(`Longitude: ${crd.longitude}`);\n    console.log(`More or less ${crd.accuracy} meters.`);\n  }\n  \n  function error(err: any) {\n    console.warn(`ERROR(${err.code}): ${err.message}`);\n  }\n  \n\nconst getCurrentPosition = (options: any) => {\n    return new Promise((resolve, reject) => {\n        navigator.geolocation.getCurrentPosition(resolve, reject, options);\n    })\n}\nvar options = {\n    enableHighAccuracy: true,\n    timeout: 1000,\n    maximumAge: 0\n};\nconst getCoordinates: () => Promise<Coordinates | null> = async () => {\n    \n    let coordinates = null;\n    var options = {\n        enableHighAccuracy: true,\n        timeout: 1000,\n        maximumAge: 0\n    };\n\n   \n\n\n    return coordinates\n}\n\ninterface Coordinates {\n    lat: number;\n    lng: number;\n    utc?: number;\n}\n\ninterface StartStopProps {\n    isRunning: boolean,\n    toggle: Dispatch<SetStateAction<boolean>>\n}\n\nconst StartStop = (props: StartStopProps) => {\n    const { isRunning, toggle } = props;\n    return (\n        isRunning \n            ? <a onClick={() => toggle(false)}>Pause</a>\n            : <a onClick={() => toggle(true)}>Start</a>\n    )\n}\nconst Running = () => {\n    const [coordinates, setCoordinates] = useState([] as Coordinates[]);\n    const [isRunning, setIsRunning] = useState(true);\n\n    async function updateCoordinates() {\n        const currentPosition = await getCoordinates();\n        if(isRunning) {\n            try { \n                const crd:any = await getCurrentPosition(options);\n                console.log(crd.latitude);\n                setInterval(() => {\n                \n                    if(currentPosition !== null) {\n                        setCoordinates([...coordinates, {\n                            lat: crd.latitude,\n                            lng: crd.longitude,\n                            // utc: Date.now()\n                        }])\n                    }\n    \n                    //console.log(coordinates);\n                }, 1000)\n            } catch (err) {\n                console.warn(`ERROR(${err.code}): ${err.message}`);\n            }\n            \n        } \n        \n    }\n    useEffect(() => {\n        updateCoordinates();\n    }, [])\n\n    \n\n    return (\n        <Page>\n            <h1>Run!</h1>\n            <MileCounter />\n            <Timer/>\n            <StartStop isRunning={isRunning} toggle={setIsRunning}/>\n            <Link href=\"/finished\"><a>Stop</a></Link>\n        </Page>\n    )\n}\n    \nexport default Running"]},"metadata":{},"sourceType":"module"}