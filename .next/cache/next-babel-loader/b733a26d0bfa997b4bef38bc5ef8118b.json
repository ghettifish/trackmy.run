{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nvar _jsxFileName = \"/Users/nicbovee/Projects/PrismaDemo/frontend/pages/running.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n    color: #fff;\\n    list-style-type: none;\\n    font-family: monospace;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    background: #16103a;\\n    min-height: 500px;\\n    max-height: 1024px;\\n    overflow: scroll;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    padding: 20px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport Page from \"../templates/Page\";\nimport Link from \"next/link\";\nimport Timer from \"../components/Timer\";\nimport MileCounter from \"../components/MileCounter\";\nimport { useState, useEffect, useRef } from 'react';\nimport styled from \"styled-components\";\n\nvar getCoordinates = function getCoordinates(arr, callback) {\n  var response = null;\n  var options = {\n    enableHighAccuracy: true,\n    timeout: 1000,\n    maximumAge: 0\n  };\n\n  function success(pos) {\n    var crd = pos.coords;\n    response = {\n      lat: crd.latitude,\n      lng: crd.longitude,\n      utc: _Date$now()\n    };\n    callback([].concat(_toConsumableArray(arr), [response]));\n    return;\n  }\n\n  function error(err) {\n    console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n  }\n\n  navigator.geolocation.getCurrentPosition(success, error, options);\n};\n\nvar StartStop = function StartStop(props) {\n  var isRunning = props.isRunning,\n      toggle = props.toggle;\n  return isRunning ? __jsx(\"button\", {\n    onClick: function onClick() {\n      return toggle(false);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"Pause\") : __jsx(\"button\", {\n    onClick: function onClick() {\n      return toggle(true);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, \"Start\");\n};\n\nfunction useInterval(callback, delay) {\n  var savedCallback = useRef(); // Remember the latest callback.\n\n  useEffect(function () {\n    savedCallback.current = callback;\n  }, [callback]); // Set up the interval.\n\n  useEffect(function () {\n    function tick() {\n      savedCallback.current();\n    }\n\n    if (delay !== null) {\n      var id = setInterval(tick, delay);\n      return function () {\n        return clearInterval(id);\n      };\n    }\n  }, [delay]);\n}\n\nvar startTime = _Date$now();\n\nvar Running = function Running() {\n  var _useState = useState([]),\n      coordinates = _useState[0],\n      setCoordinates = _useState[1];\n\n  var _useState2 = useState(true),\n      isRunning = _useState2[0],\n      setIsRunning = _useState2[1];\n\n  var _useState3 = useState(0),\n      duration = _useState3[0],\n      setDuration = _useState3[1];\n\n  useInterval(function () {\n    if (isRunning) {\n      getCoordinates(coordinates, setCoordinates);\n      var currentTime = coordinates[coordinates.length - 1] && coordinates[coordinates.length - 1].utc;\n\n      if (currentTime) {\n        setDuration((currentTime - startTime) / 1000);\n      }\n\n      console.log(coordinates); //console.log(coordinates);\n    }\n  }, 1000);\n  return __jsx(Page, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Run!\"), __jsx(MileCounter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), __jsx(Timer, {\n    time: duration,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), __jsx(StartStop, {\n    isRunning: isRunning,\n    toggle: setIsRunning,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), __jsx(Link, {\n    href: \"/finished\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Stop\")), __jsx(Console, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, coordinates.map(function (x) {\n    return __jsx(LineItem, {\n      key: x.utc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"Lat: \", x.lat, \" | Lng: \", x.lng, \" | UTC: \", x.utc);\n  })));\n};\n\nvar Button = styled.button(_templateObject());\nvar Console = styled.ul(_templateObject2());\nvar LineItem = styled.li(_templateObject3());\nexport default Running;","map":{"version":3,"sources":["/Users/nicbovee/Projects/PrismaDemo/frontend/pages/running.tsx"],"names":["Page","Link","Timer","MileCounter","useState","useEffect","useRef","styled","getCoordinates","arr","callback","response","options","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","lat","latitude","lng","longitude","utc","error","err","console","warn","code","message","navigator","geolocation","getCurrentPosition","StartStop","props","isRunning","toggle","useInterval","delay","savedCallback","current","tick","id","setInterval","clearInterval","startTime","Running","coordinates","setCoordinates","setIsRunning","duration","setDuration","currentTime","length","log","map","x","Button","button","Console","ul","LineItem","li"],"mappings":"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","sourcesContent":["import Page from \"../templates/Page\";\nimport Link from \"next/link\";\nimport Timer from \"../components/Timer\";\nimport MileCounter from \"../components/MileCounter\";\nimport { useState, useEffect, Dispatch, SetStateAction, useRef } from 'react';\nimport styled from \"styled-components\";\n\n\n\nconst getCoordinates: (arr: Coordinates[], callback: any) => void = (arr, callback) => {\n    \n    let response = null;\n    var options = {\n        enableHighAccuracy: true,\n        timeout: 1000,\n        maximumAge: 0\n    };\n\n    function success(pos: any) {\n        let crd = pos.coords;\n        response = {\n            lat: crd.latitude,\n            lng: crd.longitude,\n            utc: Date.now()\n        } as Coordinates\n        callback([...arr, response]);\n        return;\n    }\n      \n    function error(err: any) {\n        console.warn(`ERROR(${err.code}): ${err.message}`);\n    }\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n}\n\ninterface Coordinates {\n    lat: number;\n    lng: number;\n    utc: number;\n}\n\ninterface StartStopProps {\n    isRunning: boolean,\n    toggle: Dispatch<SetStateAction<boolean>>\n}\n\nconst StartStop = (props: StartStopProps) => {\n    const { isRunning, toggle } = props;\n    return (\n        isRunning \n            ? <button onClick={() => toggle(false)}>Pause</button>\n            : <button onClick={() => toggle(true)}>Start</button>\n    )\n}\nfunction useInterval(callback: any, delay: any) {\n    const savedCallback = useRef() as any;\n  \n    // Remember the latest callback.\n    useEffect(() => {\n      savedCallback.current = callback;\n    }, [callback]);\n  \n    // Set up the interval.\n    useEffect(() => {\n      function tick() {\n        savedCallback.current();\n      }\n      if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n      }\n    }, [delay]);\n  }\n  const startTime = Date.now();\n\nconst Running = () => {\n    const [coordinates, setCoordinates] = useState([] as Coordinates[]);\n    const [isRunning, setIsRunning] = useState(true);\n    const [duration, setDuration]  = useState(0);\n\n    useInterval(() => {\n        if(isRunning) {\n            getCoordinates(coordinates, setCoordinates);\n            const currentTime = coordinates[coordinates.length-1] && coordinates[coordinates.length-1].utc;\n            if(currentTime) {\n                setDuration((currentTime - startTime) / 1000);\n            }\n            console.log(coordinates)\n           \n            //console.log(coordinates);\n\n        } \n    }, 1000)\n\n    \n\n    return (\n        <Page>\n            <h1>Run!</h1>\n            <MileCounter />\n            <Timer time={duration}/>\n            <StartStop isRunning={isRunning} toggle={setIsRunning}/>\n            <Link href=\"/finished\"><a>Stop</a></Link>\n            <Console>\n            {\n                coordinates.map(x => <LineItem key={x.utc}>Lat: {x.lat} | Lng: {x.lng} | UTC: {x.utc}</LineItem>)\n            }\n            </Console>\n        </Page>\n    )\n}\n\nconst Button = styled.button`\n    padding: 20px;\n`;\nconst Console = styled.ul`\n    background: #16103a;\n    min-height: 500px;\n    max-height: 1024px;\n    overflow: scroll;\n`;\nconst LineItem = styled.li`\n    color: #fff;\n    list-style-type: none;\n    font-family: monospace;\n`\n\nexport default Running"]},"metadata":{},"sourceType":"module"}